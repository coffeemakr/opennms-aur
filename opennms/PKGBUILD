# Maintainer: Your Name <youremail@domain.com>
pkgname="opennms"
pkgver="18.0.2_1"
pkgrel=1
pkgdesc="something"
arch=('i686' 'x86_64')
url=""
license=('GPL')
groups=()
depends=('jre8-openjdk' 'jicmp' 'jicmp6')
makedepends=('jdk8-openjdk' 'perl')
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(https://github.com/OpenNMS/opennms/archive/opennms-${pkgver//_/-}.tar.gz)
noextract=()
md5sums=('c984769c32b713ece7c24181a896bae7')
sha512sums=('ceccaa660bfb8e1e4f0f1e4159c8e3b7c1db2a8ff5220707b71f7b94fa5f5577ed9e1208d7cc33ba3afd9c66c8f8985721d03c5b6bf2ccc735eac9253d5b04ff')

prepare() {
	[ -e "$pkgname-$pkgver" ] &&  rm -rf "$pkgname-$pkgver"
	mv "$pkgname-$pkgname-${pkgver//_/-}" "$pkgname-$pkgver"
}

build() {
	unset _JAVA_OPTIONS
	export JAVA_VENDOR="openjdk"
	export JAVA_HOME="/usr/lib/jvm/java-8-openjdk"
	cd "$pkgname-$pkgver"
	nice ./compile.pl -j "$JAVA_HOME" -m "-Dmaven.test.skip=true" --projects :org.opennms.core.build --also-make install 
	./assemble.pl -Dopennms.home=/opt/opennms
}

package() {
	tar xvf $pkgname-  C "$pkgdir/opt/opennms" 
	cd "pkgname-$pkgname-${pkgver//_/-}"
	
}
